pipeline {
  agent any
  stages {
    stage('Unit Test') { 
        steps {
            bat 'mvn clean test'
        }
    }
    stage('Build Application') {
        steps {
            bat 'mvn clean install'
        }
    }
    stage('Deploy CloudHub') { 
        steps {
            bat 'mvn clean deploy -DmuleDeploy' 
        }
    }
    stage('Deploy Standalone') {
        steps {
            bat 'docker run -i -p 8092:8092 -t stand-mule' 
        }
        steps {
            bat 'mvn deploy -P standalone -Dmule.home=/opt/mule' 
        }
    }
  }
}
